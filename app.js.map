{"version":3,"sources":["app/components/App.js","app/components/Countdown.js","app/components/Timer.js","app/components/Toggle.js","app/initialize.js","app/reducer.js"],"names":["App","props","Component","Countdown","sound","src","prevProps","prevCount","countdown","count","countChanged","Math","ceil","play","start","dispatch","settings","interval","setInterval","type","Count","name","value","timer","counts","valueChanged","op","val","e","preventDefault","min","max","state","label","unit","isStopped","progress","active","height","update","bind","Timer","startSound","endSound","Toggle","toggle","ConnectedApp","document","addEventListener","store","hang","rest","reps","recover","render","querySelector","stop","updateSetting","inc","dec","prevTime","Date","getTime","dt","clearInterval","startCountdown"],"mappings":"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","file":"public/app.js","sourcesContent":["import React from 'react'\n\nimport Timer from './Timer'\nimport Toggle from './Toggle'\nimport Countdown from './Countdown'\n\nexport default class App extends React.Component {\n  render () {\n    return <div className='app'>\n      <Timer {...this.props} />\n      <Toggle {...this.props} />\n      <Countdown {...this.props} />\n    </div>\n  }\n}\n","import React from 'react'\nimport { Howl } from 'howler'\n\nexport default class Countdown extends React.Component {\n  constructor (props) {\n    super(props)\n    this.sound = new Howl({\n      src: ['./audio/countdown.mp3']\n    })\n  }\n  componentDidUpdate (prevProps) {\n    const prevCount = prevProps.countdown.count\n    const count = this.props.countdown.count\n    const countChanged = Math.ceil(prevCount) !== Math.ceil(count)\n    if (prevCount && countChanged) {\n      if (prevCount && count) {\n        this.sound.play()\n      }\n      if (!this.props.countdown.count) {\n        this.start()\n      }\n    }\n  }\n  start () {\n    const { dispatch, settings } = this.props\n    const interval = setInterval(() => {\n      dispatch({ type: 'update' })\n    }, 100)\n    dispatch({ type: 'start', interval, settings })\n  }\n  render () {\n    const { countdown } = this.props\n    return countdown.count\n      ? <div className='countdown'>{Math.ceil(countdown.count)}</div>\n      : null\n  }\n}\n","import React from 'react'\nimport cn from 'classnames'\nimport { Howl } from 'howler'\n\nclass Count extends React.Component {\n  constructor (props) {\n    super(props)\n    this.sound = new Howl({\n      src: [`./audio/${props.name}.mp3`]\n    })\n  }\n  componentDidUpdate (prevProps) {\n    const value = this.props.timer.counts[this.props.name]\n    const valueChanged = Math.ceil(value) !==\n      Math.ceil(prevProps.timer.counts[prevProps.name])\n    if (value > 0 && valueChanged) {\n      this.sound.play()\n    }\n  }\n  update (op, val, e) {\n    e.preventDefault()\n    const { dispatch, settings, name, min, max } = this.props\n    const value = settings[name]\n    if ((op === 'dec' && value <= min) ||\n        (op === 'inc' && value >= max)) {\n      return\n    }\n    dispatch({\n      type: 'updateSetting',\n      [op]: val,\n      name\n    })\n  }\n  render () {\n    const { state, settings, timer, name, label, unit } = this.props\n    const isStopped = state === 'stopped'\n    const counts = isStopped ? settings : timer.counts\n    const value = counts[name]\n    const progress = value / settings[name]\n    return <div className={cn('count', name, { active: name === timer.count })}>\n      <div className='count-bg' style={{ height: (progress * 100) + '%' }} />\n      <span className='label'>{label}</span>\n      {isStopped\n        ? <button className='up' onClick={this.update.bind(this, 'inc', 1)} />\n        : null}\n      <div className='value'>{Math.ceil(value)}</div>\n      {isStopped\n        ? <button className='down' onClick={this.update.bind(this, 'dec', 1)} />\n        : null}\n      <span className='label'>{unit}</span>\n    </div>\n  }\n}\n\nexport default class Timer extends React.Component {\n  constructor (props) {\n    super(props)\n    this.startSound = new Howl({\n      src: ['./audio/rep_start.mp3']\n    })\n    this.endSound = new Howl({\n      src: ['./audio/rep_end.mp3']\n    })\n  }\n  componentDidUpdate (prevProps) {\n    const { count } = this.props.timer\n    if (count !== prevProps.timer.count) {\n      switch (count) {\n        case 'hang':\n          this.startSound.play()\n          break\n        case 'rest':\n          this.endSound.play()\n          break\n      }\n    }\n  }\n  render () {\n    return <div className='timer'>\n      <Count name='hang' label='Hang' unit='secs' min={1} max={99} {...this.props} />\n      <Count name='rest' label='Rest' unit='secs' min={1} max={99} {...this.props} />\n      <Count name='reps' label='Reps' unit='total' min={1} max={99} {...this.props} />\n      <Count name='recover' label='Recover' unit='mins' min={1} max={99} {...this.props} />\n    </div>\n  }\n}\n","import React from 'react'\nimport cn from 'classnames'\n\nexport default class Toggle extends React.Component {\n  render () {\n    return <button className={cn('toggle', this.props.state)} onClick={this.toggle.bind(this)} />\n  }\n  toggle (e) {\n    e.preventDefault()\n    const { dispatch, state } = this.props\n    if (state === 'stopped') {\n      const interval = setInterval(() => {\n        dispatch({ type: 'countdown' })\n      }, 100)\n      dispatch({ type: 'startCountdown', interval })\n    } else {\n      dispatch({ type: 'stop' })\n    }\n  }\n}\n","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from 'components/App'\nimport {createStore} from 'redux'\nimport {Provider, connect} from 'react-redux'\n\nimport reducer from './reducer'\n\nconst ConnectedApp = connect(state => state)(App)\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const store = createStore(reducer, {\n    countdown: 3,\n    settings: {\n      hang: 7,\n      rest: 3,\n      reps: 6,\n      recover: 3\n    }\n  })\n  ReactDOM.render(<Provider store={store}>\n    <ConnectedApp />\n  </Provider>, document.querySelector('#app'))\n})\n","import { combineReducers } from 'redux'\nimport buildReducer from 'build-reducer'\n\nexport default combineReducers({\n  state: buildReducer({\n    start (state) {\n      return 'started'\n    },\n    stop (state) {\n      return 'stopped'\n    }\n  }, 'stopped'),\n\n  settings: buildReducer({\n    updateSetting (state, { name, inc, dec }) {\n      return {\n        ...state,\n        [name]: state[name] + (inc || 0) - (dec || 0)\n      }\n    }\n  }, {}),\n\n  timer: buildReducer({\n    start (state, { interval, settings }) {\n      const prevTime = new Date().getTime()\n      return {\n        settings,\n        counts: settings,\n        interval,\n        prevTime\n      }\n    },\n    update (state) {\n      const prevTime = new Date().getTime()\n      const dt = prevTime - state.prevTime\n      let { count, settings, counts } = state\n      let { hang, rest, reps, recover } = counts\n      if (counts.hang > 0) {\n        count = 'hang'\n        hang = Math.max(0, counts.hang - (dt / 1000))\n      } else if (counts.rest > 0) {\n        count = 'rest'\n        rest = Math.max(0, counts.rest - (dt / 1000))\n      } else if (counts.reps > 0) {\n        count = 'reps'\n        reps = counts.reps - 1\n        hang = settings.hang\n        rest = settings.rest\n      } else if (counts.recover > 0) {\n        count = 'recover'\n        recover = Math.max(0, counts.recover - (dt / 60 / 1000))\n      } else {\n        count = 'hang'\n        hang = settings.hang\n        rest = settings.rest\n        reps = settings.reps\n      }\n      return {\n        ...state,\n        counts: { hang, rest, reps, recover },\n        count,\n        prevTime\n      }\n    },\n    stop (state) {\n      clearInterval(state.interval)\n      return {\n        ...state,\n        settings: null,\n        count: null\n      }\n    }\n  }, { counts: {} }),\n\n  countdown: buildReducer({\n    startCountdown (state, { interval }) {\n      const prevTime = new Date().getTime()\n      return {\n        count: 3,\n        interval,\n        prevTime\n      }\n    },\n    countdown (state) {\n      const prevTime = new Date().getTime()\n      const dt = prevTime - state.prevTime\n      const count = Math.max(0, state.count - (dt / 1000))\n      if (count > 0) {\n        return {\n          ...state,\n          count,\n          prevTime\n        }\n      } else {\n        clearInterval(state.interval)\n        return {}\n      }\n    }\n  }, {})\n})\n\n"]}